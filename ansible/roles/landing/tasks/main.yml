---
- name: Deploy landing page via docker-compose
  community.docker.docker_compose_v2:
    project_src: /home/johnb/homelab-admin/platform/landing
    state: present
  become: yes
  register: landing_result

- name: Wait for landing page to be ready
  uri:
    url: http://localhost/
    status_code: [200, 301, 302]
  retries: 10
  delay: 2
  register: result
  until: result.status in [200, 301, 302]
  become: no
  ignore_errors: yes
