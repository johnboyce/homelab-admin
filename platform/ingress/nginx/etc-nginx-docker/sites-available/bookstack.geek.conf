# BookStack reverse-proxy + Authentik forward-auth
# Strategy: Redirect internal domain to public HTTPS to avoid domain/SSO conflicts
# - Internal:        http://bookstack.geek â†’ https://bookstack.johnnyblabs.com (via 302)
# - Public HTTPS:    https://bookstack.johnnyblabs.com (canonical, with SSO)

# --------
# Redirect internal domain to public HTTPS
# --------
server {
  listen 80;
  server_name bookstack.geek;

  # Redirect all requests from internal domain to public HTTPS
  return 302 https://bookstack.johnnyblabs.com$request_uri;
}
